import{i as L,u as v,a as y,c as w,r as e,d as E,e as h,j as g,k as f,b as m}from"./assets/cart-DMW4Xhv0.js";import{o as b}from"./assets/modal-FH3BqvZk.js";import{i as M}from"./assets/vendor-I1I71QQ2.js";let s=1,i="All",a="";const o=12,l=()=>{var t;return(t=e.loader)==null?void 0:t.classList.add("loader--visible")},u=()=>{var t;return(t=e.loader)==null?void 0:t.classList.remove("loader--visible")},c=t=>{M.error({title:"Error",message:t,position:"topRight"})},p=()=>{e.products.innerHTML="",e.notFound.classList.add("not-found--visible"),e.loadMoreBtn.classList.add("is-hidden")};async function n(){try{l(),e.products.innerHTML="",e.notFound.classList.remove("not-found--visible");let t;a?t=await h(a):i==="All"?t=await g(o,(s-1)*o):t=await f(i,o,(s-1)*o),t.products.length===0?p():(e.products.innerHTML=m(t.products),e.loadMoreBtn.classList.toggle("is-hidden",t.products.length<o))}catch(t){console.error("Error loading products:",t),c("Failed to load products"),p()}finally{u()}}function F(){e.categories.addEventListener("click",t=>{if(t.target.classList.contains("categories__btn")){const r=t.target.textContent.trim();r!==i&&(i=r,s=1,a="",e.searchFormInput.value="",n(),document.querySelectorAll(".categories__btn").forEach(d=>{d.classList.remove("categories__btn--active")}),t.target.classList.add("categories__btn--active"))}}),e.products.addEventListener("click",t=>{const r=t.target.closest(".products__item");if(r){const d=r.dataset.id;b(d)}}),e.searchForm.addEventListener("submit",t=>{t.preventDefault();const r=e.searchFormInput.value.trim();r&&(a=r,s=1,n())}),e.searchFormClearBtn.addEventListener("click",()=>{e.searchFormInput.value="",a="",s=1,n()}),e.loadMoreBtn.addEventListener("click",async()=>{s+=1;try{l();let t;a?t=await h(a):i==="All"?t=await g(o,(s-1)*o):t=await f(i,o,(s-1)*o);const r=t.products;r.length>0?(e.products.insertAdjacentHTML("beforeend",m(r)),r.length<o&&e.loadMoreBtn.classList.add("is-hidden")):(e.loadMoreBtn.classList.add("is-hidden"),c("No more products to load"))}catch(t){console.error("Error loading more products:",t),c("Failed to load more products")}finally{u()}}),e.scrollTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}document.addEventListener("DOMContentLoaded",async()=>{try{L(),l(),v(),y();const t=await w();e.categories.innerHTML=E(["All",...t]),await n(),F()}catch(t){console.error("Initialization error:",t),c("Failed to initialize")}finally{u()}});
//# sourceMappingURL=index.js.map
