import{i as m,b as v,r as t,c as y,d as p,e as g,j as f,a as L,o as w}from"./assets/modal-B9heRuE8.js";import{i as E}from"./assets/vendor-I1I71QQ2.js";let s=1,i="All",a="";const o=12,l=()=>{var e;return(e=t.loader)==null?void 0:e.classList.add("loader--visible")},u=()=>{var e;return(e=t.loader)==null?void 0:e.classList.remove("loader--visible")},c=e=>{E.error({title:"Error",message:e,position:"topRight"})},h=()=>{t.products.innerHTML="",t.notFound.classList.add("not-found--visible"),t.loadMoreBtn.classList.add("is-hidden")};async function n(){try{l(),t.products.innerHTML="",t.notFound.classList.remove("not-found--visible");let e;a?e=await p(a):i==="All"?e=await g(o,(s-1)*o):e=await f(i,o,(s-1)*o),e.products.length===0?h():(t.products.innerHTML=L(e.products),t.loadMoreBtn.classList.toggle("is-hidden",e.products.length<o))}catch(e){console.error("Error loading products:",e),c("Failed to load products"),h()}finally{u()}}function b(){t.categories.addEventListener("click",e=>{if(e.target.classList.contains("categories__btn")){const r=e.target.textContent.trim();r!==i&&(i=r,s=1,a="",t.searchFormInput.value="",n(),document.querySelectorAll(".categories__btn").forEach(d=>{d.classList.remove("categories__btn--active")}),e.target.classList.add("categories__btn--active"))}}),t.products.addEventListener("click",e=>{const r=e.target.closest(".products__item");if(r){const d=r.dataset.id;w(d)}}),t.searchForm.addEventListener("submit",e=>{e.preventDefault();const r=t.searchFormInput.value.trim();r&&(a=r,s=1,n())}),t.searchFormClearBtn.addEventListener("click",()=>{t.searchFormInput.value="",a="",s=1,n()}),t.loadMoreBtn.addEventListener("click",async()=>{s+=1;try{l();let e;a?e=await p(a):i==="All"?e=await g(o,(s-1)*o):e=await f(i,o,(s-1)*o);const r=e.products;r.length>0?(t.products.insertAdjacentHTML("beforeend",L(r)),r.length<o&&t.loadMoreBtn.classList.add("is-hidden")):(t.loadMoreBtn.classList.add("is-hidden"),c("No more products to load"))}catch(e){console.error("Error loading more products:",e),c("Failed to load more products")}finally{u()}}),t.scrollTopBtn.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})}document.addEventListener("DOMContentLoaded",async()=>{try{m(),l();const e=await v();t.categories.innerHTML=y(["All",...e]),await n(),b()}catch(e){console.error("Initialization error:",e),c("Failed to initialize")}finally{u()}});
//# sourceMappingURL=index.js.map
