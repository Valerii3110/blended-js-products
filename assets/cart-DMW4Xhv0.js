import{i as d}from"./vendor-I1I71QQ2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();const s={loader:document.querySelector(".loader"),scrollTopBtn:document.querySelector(".scroll-top-btn"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),categories:document.querySelector(".categories"),products:document.querySelector(".products"),loadMoreBtn:document.querySelector(".load-more-btn"),notFound:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),searchFormInput:document.querySelector(".search-form__input"),searchFormClearBtn:document.querySelector(".search-form__btn-clear"),searchFormBtn:document.querySelector(".search-form__btn"),cartCount:document.querySelector("[data-cart-count]"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartProducts:document.querySelector(".products"),cartSummaryItems:document.querySelector("[data-count]"),cartSummaryTotal:document.querySelector("[data-price]"),cartSummaryBtn:document.querySelector(".cart-summary__btn"),wishlistProducts:document.querySelector(".products")},a="https://dummyjson.com/products";async function B(){const t=await fetch(`${a}/categories`);if(!t.ok)throw new Error("Failed to fetch categories");return await t.json()}async function F(t=12,e=0){const r=await fetch(`${a}?limit=${t}&skip=${e}`);if(!r.ok)throw new Error("Failed to fetch products");return await r.json()}async function w(t){const e=await fetch(`${a}/${t}`);if(!e.ok)throw new Error("Failed to fetch product");return await e.json()}async function O(t,e=12,r=0){const n=await fetch(`${a}/category/${t}?limit=${e}&skip=${r}`);if(!n.ok)throw new Error("Failed to fetch products by category");return await n.json()}async function j(t){const e=await fetch(`${a}/search?q=${t}`);if(!e.ok)throw new Error("Failed to search products");return await e.json()}const m="cart",h="wishlist",u="theme";function f(){try{return JSON.parse(localStorage.getItem(m))||[]}catch(t){return console.error("Error reading cart from localStorage:",t),[]}}function E(t){try{localStorage.setItem(m,JSON.stringify(t))}catch(e){console.error("Error saving cart to localStorage:",e)}}function b(){try{return JSON.parse(localStorage.getItem(h))||[]}catch(t){return console.error("Error reading wishlist from localStorage:",t),[]}}function M(t){try{localStorage.setItem(h,JSON.stringify(t))}catch(e){console.error("Error saving wishlist to localStorage:",e)}}function q(){const t=localStorage.getItem(u)||"light";let e;t==="light"?e="dark":e="light",document.documentElement.setAttribute("data-theme",e),localStorage.setItem(u,e);const r=document.querySelector(".theme-toggle-btn");r&&(r.innerHTML=e==="light"?"☀️":"🌙")}function p(){const t=document.querySelector(".loader");t&&t.classList.add("loader--visible")}function y(){const t=document.querySelector(".loader");t&&t.classList.remove("loader--visible")}function $(t){d.success({title:"Success",message:t,position:"topRight"})}function k(t){d.error({title:"Error",message:t,position:"topRight"})}function A(){try{const t=f();document.querySelectorAll("[data-cart-count]").forEach(r=>{r.textContent=t.length})}catch(t){console.error("Error updating cart count:",t)}}function N(){try{const t=b();document.querySelectorAll("[data-wishlist-count]").forEach(r=>{r.textContent=t.length})}catch(t){console.error("Error updating wishlist count:",t)}}function x(t){return t.map(e=>`
      <li class="categories__item">
        <button class="categories__btn" type="button">
          ${typeof e=="object"?e.name||e.title:e}
        </button>
      </li>
    `).join("")}function C(t){return t.map(e=>`
      <li class="products__item" data-id="${e.id}">
        <img class="products__image" src="${e.thumbnail}" alt="${e.title}"/>
        <p class="products__title">${e.title}</p>
        <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${e.brand}</p>
        <p class="products__category">Category: ${e.category}</p>
        <p class="products__price">Price: $${e.price}</p>
      </li>
    `).join("")}function H(t){return`
    <img class="modal-product__img" src="${t.thumbnail}" alt="${t.title}">
    <div class="modal-product__content">
      <h3 class="modal-product__title">${t.title}</h3>
      <p class="modal-product__price">$${t.price}</p>
      <p class="modal-product__description">${t.description}</p>
    </div>
  `}function J(t){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e),s.themeToggleBtn.addEventListener("click",q),document.querySelector(".theme-toggle-btn").innerHTML=e==="light"?"☀️":"🌙"}document.addEventListener("DOMContentLoaded",g);async function g(){try{p();const t=f();if(S(t),t.length===0){l();return}const e=await T(t);L(e),_(e),P()}catch(t){console.error("Error initializing cart page:",t),l()}finally{y()}}async function T(t){try{return await Promise.all(t.map(e=>w(e)))}catch(e){return console.error("Error loading cart products:",e),[]}}function L(t){var e;t.length>0?(s.products.innerHTML=C(t),(e=document.querySelector(".not-found"))==null||e.classList.remove("not-found--visible")):l()}function S(t){s.cartSummaryItems&&(s.cartSummaryItems.textContent=t.length)}function _(t){if(s.cartSummaryTotal){const e=t.reduce((r,n)=>r+n.price,0);s.cartSummaryTotal.textContent=`$${e.toFixed(2)}`}}function l(){var t;(t=document.querySelector(".not-found"))==null||t.classList.add("not-found--visible"),S([]),_([])}function P(){const t=document.querySelector(".cart-summary__btn");t&&t.addEventListener("click",v)}async function v(){try{p(),E([]),$("Thank you for your purchase!"),g()}catch(t){console.error("Error processing purchase:",t)}finally{y()}}export{N as a,C as b,B as c,x as d,j as e,w as f,b as g,y as h,J as i,F as j,O as k,f as l,$ as m,E as n,M as o,H as p,k as q,s as r,p as s,A as u};
//# sourceMappingURL=cart-DMW4Xhv0.js.map
