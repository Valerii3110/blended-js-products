import{i as f}from"./vendor-I1I71QQ2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=o(s);fetch(s.href,c)}})();const n={loader:document.querySelector(".loader"),scrollTopBtn:document.querySelector(".scroll-top-btn"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),categories:document.querySelector(".categories"),products:document.querySelector(".products"),loadMoreBtn:document.querySelector(".load-more-btn"),notFound:document.querySelector(".not-found"),modal:document.querySelector(".modal"),modalProduct:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),searchFormInput:document.querySelector(".search-form__input"),searchFormClearBtn:document.querySelector(".search-form__btn-clear"),searchFormBtn:document.querySelector(".search-form__btn"),cartCount:document.querySelector("[data-cart-count]"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartProducts:document.querySelector(".products"),cartSummaryItems:document.querySelector("[data-count]"),cartSummaryTotal:document.querySelector("[data-price]"),cartSummaryBtn:document.querySelector(".cart-summary__btn"),wishlistProducts:document.querySelector(".products")},a="https://dummyjson.com/products";async function T(){const t=await fetch(`${a}/categories`);if(!t.ok)throw new Error("Failed to fetch categories");return await t.json()}async function F(t=12,e=0){const o=await fetch(`${a}?limit=${t}&skip=${e}`);if(!o.ok)throw new Error("Failed to fetch products");return await o.json()}async function y(t){const e=await fetch(`${a}/${t}`);if(!e.ok)throw new Error("Failed to fetch product");return await e.json()}async function A(t,e=12,o=0){const r=await fetch(`${a}/category/${t}?limit=${e}&skip=${o}`);if(!r.ok)throw new Error("Failed to fetch products by category");return await r.json()}async function M(t){const e=await fetch(`${a}/search?q=${t}`);if(!e.ok)throw new Error("Failed to search products");return await e.json()}const g="cart",p="wishlist",h="theme";function l(){try{return JSON.parse(localStorage.getItem(g))||[]}catch(t){return console.error("Error reading cart from localStorage:",t),[]}}function S(t){try{localStorage.setItem(g,JSON.stringify(t))}catch(e){console.error("Error saving cart to localStorage:",e)}}function u(){try{return JSON.parse(localStorage.getItem(p))||[]}catch(t){return console.error("Error reading wishlist from localStorage:",t),[]}}function _(t){try{localStorage.setItem(p,JSON.stringify(t))}catch(e){console.error("Error saving wishlist to localStorage:",e)}}function w(){const t=localStorage.getItem(h)||"light";let e;t==="light"?e="dark":e="light",document.documentElement.setAttribute("data-theme",e),localStorage.setItem(h,e);const o=document.querySelector(".theme-toggle-btn");o&&(o.innerHTML=e==="light"?"☀️":"🌙")}function O(){const t=document.querySelector(".loader");t&&t.classList.add("loader--visible")}function j(){const t=document.querySelector(".loader");t&&t.classList.remove("loader--visible")}function i(t){f.success({title:"Success",message:t,position:"topRight"})}function b(t){f.error({title:"Error",message:t,position:"topRight"})}function E(){try{const t=l();document.querySelectorAll("[data-cart-count]").forEach(o=>{o.textContent=t.length})}catch(t){console.error("Error updating cart count:",t)}}function q(){try{const t=u();document.querySelectorAll("[data-wishlist-count]").forEach(o=>{o.textContent=t.length})}catch(t){console.error("Error updating wishlist count:",t)}}console.log("Current cart:",l());console.log("Current wishlist:",u());function W(t){return t.map(e=>`
      <li class="categories__item">
        <button class="categories__btn" type="button">
          ${typeof e=="object"?e.name||e.title:e}
        </button>
      </li>
    `).join("")}function k(t){return t.map(e=>`
      <li class="products__item" data-id="${e.id}">
        <img class="products__image" src="${e.thumbnail}" alt="${e.title}"/>
        <p class="products__title">${e.title}</p>
        <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${e.brand}</p>
        <p class="products__category">Category: ${e.category}</p>
        <p class="products__price">Price: $${e.price}</p>
      </li>
    `).join("")}function C(t){return`
    <img class="modal-product__img" src="${t.thumbnail}" alt="${t.title}">
    <div class="modal-product__content">
      <h3 class="modal-product__title">${t.title}</h3>
      <p class="modal-product__price">$${t.price}</p>
      <p class="modal-product__description">${t.description}</p>
    </div>
  `}function N(t){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e),n.themeToggleBtn.addEventListener("click",w),document.querySelector(".theme-toggle-btn").innerHTML=e==="light"?"☀️":"🌙"}function H(t){y(t).then(e=>{n.modalProduct.innerHTML=C(e),n.modal.classList.add("modal--is-open"),L(t),m(t)}).catch(e=>{console.error("Error opening modal:",e),b("Failed to load product details")})}function $(){n.modal.classList.remove("modal--is-open")}function L(t){const e=n.modal.querySelector(".modal-product__btn--cart"),o=n.modal.querySelector(".modal-product__btn--wishlist");e&&e.addEventListener("click",()=>v(t)),o&&o.addEventListener("click",()=>P(t))}function m(t){const e=n.modal.querySelector(".modal-product__btn--cart"),o=n.modal.querySelector(".modal-product__btn--wishlist");if(e){const r=l();e.textContent=r.includes(t)?"Remove from Cart":"Add to Cart",e.classList.toggle("active",r.includes(t))}if(o){const r=u();o.textContent=r.includes(t)?"Remove from Wishlist":"Add to Wishlist",o.classList.toggle("active",r.includes(t))}}function v(t){let e=l();e.includes(t)?(e=e.filter(r=>r!==t),i("Product removed from cart")):(e.push(t),i("Product added to cart")),S(e),m(t),E()}function P(t){let e=u();e.includes(t)?(e=e.filter(r=>r!==t),i("Product removed from wishlist")):(e.push(t),i("Product added to wishlist")),_(e),m(t),q()}document.addEventListener("DOMContentLoaded",()=>{n.modal.addEventListener("click",t=>{(t.target===n.modal||t.target.classList.contains("modal__close-btn"))&&$()})});export{k as a,T as b,W as c,M as d,F as e,y as f,u as g,j as h,N as i,A as j,l as k,i as l,S as m,E as n,H as o,n as r,O as s,q as u};
//# sourceMappingURL=modal-B9heRuE8.js.map
