{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["import { refs } from './js/refs.js';\nimport { fetchProductById } from './js/products-api.js';\nimport { initPageTheme, renderProducts } from './js/render-functions.js';\nimport { getCart, setCart } from './js/storage.js';\nimport {\n  showLoader,\n  hideLoader,\n  showSuccessToast,\n  updateCartCount,\n} from './js/helpers.js';\nimport { openModal } from './js/modal.js';\n\ndocument.addEventListener('DOMContentLoaded', initCartPage);\n\nasync function initCartPage() {\n  try {\n    showLoader();\n    initPageTheme();\n    const cart = getCart();\n    updateCartSummary(cart);\n\n    if (cart.length === 0) {\n      showEmptyCart();\n      return;\n    }\n\n    const products = await Promise.all(cart.map(id => fetchProductById(id)));\n    renderCartProducts(products);\n    updateTotalPrice(products);\n\n    setupCartPageEventListeners();\n  } catch (error) {\n    console.error('Error initializing cart page:', error);\n    showErrorToast('Не вдалося завантажити товари в кошику');\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction renderCartProducts(products) {\n  refs.cartProducts.innerHTML = renderProducts(products);\n}\n\nfunction updateCartSummary(cart) {\n  refs.cartSummaryItems.textContent = cart.length;\n}\n\nfunction updateTotalPrice(products) {\n  const total = products.reduce((sum, product) => sum + product.price, 0);\n  refs.cartSummaryTotal.textContent = `$${total.toFixed(2)}`;\n}\n\nfunction showEmptyCart() {\n  refs.notFound.classList.add('not-found--visible');\n  refs.cartSummaryItems.textContent = '0';\n  refs.cartSummaryTotal.textContent = '$0';\n}\n\nfunction setupCartPageEventListeners() {\n  // Відкриття модального вікна\n  refs.cartProducts.addEventListener('click', e => {\n    const productItem = e.target.closest('.products__item');\n    if (productItem) {\n      const productId = productItem.dataset.id;\n      openModal(productId);\n    }\n  });\n\n  // Кнопка покупки\n  refs.cartSummaryBtn.addEventListener('click', () => {\n    showSuccessToast('Дякуємо за покупку! Ваше замовлення оформлено.');\n    setCart([]);\n    updateCartCount();\n    showEmptyCart();\n  });\n}\n"],"names":["initCartPage","showLoader","initPageTheme","cart","getCart","updateCartSummary","showEmptyCart","products","id","fetchProductById","renderCartProducts","updateTotalPrice","setupCartPageEventListeners","error","hideLoader","refs","renderProducts","total","sum","product","e","productItem","productId","openModal","showSuccessToast","setCart","updateCartCount"],"mappings":"oJAYA,SAAS,iBAAiB,mBAAoBA,CAAY,EAE1D,eAAeA,GAAe,CAC5B,GAAI,CACFC,IACAC,IACA,MAAMC,EAAOC,IAGb,GAFAC,EAAkBF,CAAI,EAElBA,EAAK,SAAW,EAAG,CACrBG,IACA,MACD,CAED,MAAMC,EAAW,MAAM,QAAQ,IAAIJ,EAAK,IAAIK,GAAMC,EAAiBD,CAAE,CAAC,CAAC,EACvEE,EAAmBH,CAAQ,EAC3BI,EAAiBJ,CAAQ,EAEzBK,GACD,OAAQC,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,EACpD,eAAe,wCAAwC,CAC3D,QAAY,CACRC,GACD,CACH,CAEA,SAASJ,EAAmBH,EAAU,CACpCQ,EAAK,aAAa,UAAYC,EAAeT,CAAQ,CACvD,CAEA,SAASF,EAAkBF,EAAM,CAC/BY,EAAK,iBAAiB,YAAcZ,EAAK,MAC3C,CAEA,SAASQ,EAAiBJ,EAAU,CAClC,MAAMU,EAAQV,EAAS,OAAO,CAACW,EAAKC,IAAYD,EAAMC,EAAQ,MAAO,CAAC,EACtEJ,EAAK,iBAAiB,YAAc,IAAIE,EAAM,QAAQ,CAAC,CAAC,EAC1D,CAEA,SAASX,GAAgB,CACvBS,EAAK,SAAS,UAAU,IAAI,oBAAoB,EAChDA,EAAK,iBAAiB,YAAc,IACpCA,EAAK,iBAAiB,YAAc,IACtC,CAEA,SAASH,GAA8B,CAErCG,EAAK,aAAa,iBAAiB,QAASK,GAAK,CAC/C,MAAMC,EAAcD,EAAE,OAAO,QAAQ,iBAAiB,EACtD,GAAIC,EAAa,CACf,MAAMC,EAAYD,EAAY,QAAQ,GACtCE,EAAUD,CAAS,CACpB,CACL,CAAG,EAGDP,EAAK,eAAe,iBAAiB,QAAS,IAAM,CAClDS,EAAiB,gDAAgD,EACjEC,EAAQ,CAAE,CAAA,EACVC,IACApB,GACJ,CAAG,CACH"}