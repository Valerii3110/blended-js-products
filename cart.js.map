{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["import { refs } from './js/refs.js';\nimport { fetchProductById } from './js/products-api.js';\nimport { renderProducts } from './js/render-functions.js';\nimport { openModal } from './js/modal.js';\nimport { getFromStorage, removeFromCart } from './js/storage.js';\nimport { updateCartCount, handleProductClick } from './js/handlers.js';\nimport { showSuccess } from './js/helpers.js';\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n  const cartIds = getFromStorage(STORAGE_KEYS.CART);\n  const cartCountElement = document.querySelector(SELECTORS.CART_COUNT);\n  const summaryCountElement = document.querySelector('.cart-summary__items');\n  const summaryPriceElement = document.querySelector('.cart-summary__total');\n\n  // Оновлюємо лічильник у header\n  if (cartCountElement) {\n    cartCountElement.textContent = cartIds.length;\n  }\n\n  if (cartIds.length === 0) {\n    document.querySelector('.not-found').classList.add('not-found--visible');\n    document.querySelector('.cart-summary').style.display = 'none';\n    return;\n  }\n\n  try {\n    const products = await Promise.all(cartIds.map(id => fetchProductById(id)));\n\n    const validProducts = products.filter(Boolean);\n    renderProducts(validProducts);\n\n    // Оновлюємо підсумок\n    if (summaryCountElement) {\n      summaryCountElement.textContent = validProducts.length;\n    }\n\n    if (summaryPriceElement) {\n      const totalPrice = validProducts.reduce(\n        (sum, product) => sum + product.price,\n        0\n      );\n      summaryPriceElement.textContent = `$${totalPrice.toFixed(2)}`;\n    }\n  } catch (error) {\n    document.querySelector('.not-found').classList.add('not-found--visible');\n    document.querySelector('.cart-summary').style.display = 'none';\n  }\n});\n"],"names":["cartIds","getFromStorage","cartCountElement","summaryCountElement","summaryPriceElement","validProducts","id","fetchProductById","renderProducts","totalPrice","sum","product"],"mappings":"iGAQA,SAAS,iBAAiB,mBAAoB,SAAY,CACxD,MAAMA,EAAUC,EAAe,aAAa,IAAI,EAC1CC,EAAmB,SAAS,cAAc,UAAU,UAAU,EAC9DC,EAAsB,SAAS,cAAc,sBAAsB,EACnEC,EAAsB,SAAS,cAAc,sBAAsB,EAOzE,GAJIF,IACFA,EAAiB,YAAcF,EAAQ,QAGrCA,EAAQ,SAAW,EAAG,CACxB,SAAS,cAAc,YAAY,EAAE,UAAU,IAAI,oBAAoB,EACvE,SAAS,cAAc,eAAe,EAAE,MAAM,QAAU,OACxD,MACD,CAED,GAAI,CAGF,MAAMK,GAFW,MAAM,QAAQ,IAAIL,EAAQ,IAAIM,GAAMC,EAAiBD,CAAE,CAAC,CAAC,GAE3C,OAAO,OAAO,EAQ7C,GAPAE,EAAeH,CAAa,EAGxBF,IACFA,EAAoB,YAAcE,EAAc,QAG9CD,EAAqB,CACvB,MAAMK,EAAaJ,EAAc,OAC/B,CAACK,EAAKC,IAAYD,EAAMC,EAAQ,MAChC,CACR,EACMP,EAAoB,YAAc,IAAIK,EAAW,QAAQ,CAAC,CAAC,EAC5D,CACF,MAAe,CACd,SAAS,cAAc,YAAY,EAAE,UAAU,IAAI,oBAAoB,EACvE,SAAS,cAAc,eAAe,EAAE,MAAM,QAAU,MACzD,CACH,CAAC"}